---
import Base from "../layouts/Base.astro";
import SectionWrapper from "../components/SectionWrapper.astro";
import Button from "../components/Button.astro";
import Card from "../components/Card.astro";
import FormInput from "../components/FormInput.astro";

const courses = [
  {
    title: "SEO Foundations",
    icon: "seo",
    desc: "I walk you through keyword research, on-page optimization, technical SEO, and link building. Learn how to rank on Google and get organic traffic without paying for every click.",
  },
  {
    title: "Paid Advertising",
    icon: "paid-ads",
    desc: "I show you how I set up and scale Google Ads and Meta Ads. Campaign structure, targeting, bidding — and how to read your data so you know what is actually working.",
  },
  {
    title: "Email & SMS Marketing",
    icon: "email",
    desc: "I teach you how to build automated sequences that nurture leads and drive repeat sales. Welcome flows, win-back campaigns, the works — all systems that sell while you sleep.",
  },
  {
    title: "Social Media Strategy",
    icon: "social-media",
    desc: "I break down how to create a content strategy that grows your audience. What to post, when to post, and how to actually turn followers into paying customers.",
  },
  {
    title: "High-Converting Websites",
    icon: "website",
    desc: "I show you how to turn your website into something that generates leads. Landing page design, conversion optimization, and what makes people click that button.",
  },
  {
    title: "Sales Funnels & Automation",
    icon: "funnel",
    desc: "I walk you through building your customer journey from first click to closed deal. Funnel strategy, automation tools, and the metrics that actually matter.",
  },
];

const steps = [
  { icon: "dashboard", title: "Watch", desc: "On-demand video lessons with real campaign walkthroughs — no filler." },
  { icon: "automation", title: "Apply", desc: "Use my templates and checklists to implement what you learn immediately." },
  { icon: "analytics", title: "Measure", desc: "Track your results with the same dashboards and frameworks I use." },
];
---

<Base title="Courses" description="Alan Chan's digital marketing courses — SEO, paid ads, email, social media, websites, and funnels. Built on real campaigns.">

  <!-- Hero Section -->
  <SectionWrapper class="pt-16 sm:pt-20 pb-8 sm:pb-12">
    <h1 class="text-h1 text-center mb-4">My Courses</h1>
    <p class="text-body-lg text-text-secondary text-center max-w-2xl mx-auto">
      Everything I know about digital marketing, organized into courses you can take at your own pace. Each one is built on campaigns I actually ran — real budgets, real results.
    </p>
  </SectionWrapper>

  <!-- Banner -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8">
    <img
      src="/images/banners/banner-1.webp"
      alt="Digital marketing courses by Alan Chan"
      width="1920"
      height="480"
      class="w-full rounded-xl"
      loading="eager"
    />
  </div>

  <!-- Course Grid -->
  <SectionWrapper width="wide">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {courses.map((course) => (
        <Card>
          <div class="flex items-start justify-between mb-4">
            <span class="bg-navy-700 text-accent rounded-full px-3 py-1 text-xs uppercase font-bold">
              Coming Soon
            </span>
            <img
              src={`/images/icons/${course.icon}.webp`}
              alt=""
              width="40"
              height="40"
              class="w-10 h-10"
              loading="lazy"
            />
          </div>
          <h3 class="text-h3 mb-3">{course.title}</h3>
          <p class="text-text-secondary">{course.desc}</p>
        </Card>
      ))}
    </div>
  </SectionWrapper>

  <!-- How It Works Section -->
  <section class="bg-navy-950">
    <SectionWrapper width="wide">
      <div class="text-center mb-12">
        <h2 class="text-h2 mb-4">How It Works</h2>
        <p class="text-body-lg text-text-secondary max-w-2xl mx-auto">
          Simple. Watch, apply, measure. Repeat.
        </p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {steps.map((step, i) => (
          <div class="text-center">
            <img
              src={`/images/icons/${step.icon}.webp`}
              alt=""
              width="64"
              height="64"
              class="w-16 h-16 mx-auto mb-4"
              loading="lazy"
            />
            <div class="text-accent font-bold text-sm uppercase tracking-wide mb-2">Step {i + 1}</div>
            <h3 class="text-h3 mb-2">{step.title}</h3>
            <p class="text-text-secondary">{step.desc}</p>
          </div>
        ))}
      </div>
    </SectionWrapper>
  </section>

  <!-- Notification Section -->
  <section class="bg-navy-800">
    <SectionWrapper id="signup" width="narrow" class="text-center">
      <h2 class="text-h2 mb-4">Be the First to Know</h2>
      <p class="text-body-lg text-text-secondary mb-8 max-w-lg mx-auto">
        Drop your email and I will let you know the second courses go live. You will also get early access pricing that will not be available after launch.
      </p>
      <form id="email-signup" class="flex flex-col sm:flex-row gap-3 max-w-md mx-auto">
        <FormInput
          type="email"
          name="email"
          placeholder="Enter your email"
          required={true}
          class="flex-1"
        />
        <Button variant="primary" size="md">Notify Me</Button>
      </form>
      <p id="form-message" class="text-sm mt-3 hidden"></p>
      <p class="text-xs text-text-tertiary mt-4">
        No spam. Unsubscribe anytime.
      </p>
    </SectionWrapper>
  </section>

  <script>
    function setupEmailForm() {
      const form = document.getElementById('email-signup') as HTMLFormElement;
      const message = document.getElementById('form-message') as HTMLElement;

      form?.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = new FormData(form).get('email') as string;

        if (!email || !email.includes('@')) {
          message.textContent = 'Please enter a valid email address.';
          message.className = 'text-sm mt-3 text-error';
          message.classList.remove('hidden');
          return;
        }

        // Phase 4 will replace this with Kit API call
        message.textContent = "You're in! I'll be in touch.";
        message.className = 'text-sm mt-3 text-success';
        message.classList.remove('hidden');
        form.reset();
      });
    }

    setupEmailForm();
    document.addEventListener('astro:after-swap', setupEmailForm);
  </script>

</Base>
