---
import Base from "../layouts/Base.astro";
import SectionWrapper from "../components/SectionWrapper.astro";
import Button from "../components/Button.astro";
import Card from "../components/Card.astro";
import AccordionItem from "../components/AccordionItem.astro";
import FormInput from "../components/FormInput.astro";

const skills = [
  { name: "SEO", icon: "seo", desc: "Rank higher and drive organic traffic that converts." },
  { name: "Paid Ads", icon: "paid-ads", desc: "Launch profitable campaigns on Google, Meta, and more." },
  { name: "Email Marketing", icon: "email", desc: "Build sequences that nurture leads and drive sales." },
  { name: "Social Media", icon: "social-media", desc: "Grow an engaged audience that buys from you." },
  { name: "Website Strategy", icon: "website", desc: "Turn your site into a lead-generating machine." },
  { name: "Sales Funnels", icon: "funnel", desc: "Automate your customer journey from click to close." },
];
---

<Base title="Home" description="Alan Chan teaches digital marketing — practical courses on SEO, paid ads, email, social media, and web strategy for business owners.">

  <!-- Hero Section -->
  <SectionWrapper width="wide" class="pt-16 sm:pt-24 pb-12 sm:pb-16">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
      <div>
        <p class="text-accent font-bold text-sm uppercase tracking-wide mb-4">Alan Chan</p>
        <h1 class="text-hero font-bold text-white mb-6">
          I Teach Business Owners<br class="hidden sm:inline" /> Digital Marketing
        </h1>
        <p class="text-body-lg text-text-secondary max-w-xl mb-8">
          I spent years and thousands of dollars figuring out what actually works in SEO, paid ads, email, and social media. Now I put everything into courses so you do not have to learn it the hard way.
        </p>
        <Button variant="primary" size="lg" href="#signup">
          Join My Email List
        </Button>
      </div>
      <div class="flex justify-center md:justify-end">
        <img
          src="/images/heroes/flowryse-1.webp"
          alt="Digital marketing strategy illustration"
          width="500"
          height="500"
          class="w-full max-w-md"
          loading="eager"
        />
      </div>
    </div>
  </SectionWrapper>

  <!-- What I Teach Section -->
  <section class="bg-navy-950">
    <SectionWrapper width="wide">
      <div class="text-center mb-12">
        <h2 class="text-h2 mb-4">Here Is What I Cover</h2>
        <p class="text-body-lg text-text-secondary max-w-2xl mx-auto">
          Everything I have learned running real campaigns for real businesses — broken into six courses you can take at your own pace.
        </p>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {skills.map((skill) => (
          <Card>
            <div class="flex items-start gap-4">
              <img
                src={`/images/icons/${skill.icon}.webp`}
                alt=""
                width="48"
                height="48"
                class="w-12 h-12 shrink-0"
                loading="lazy"
              />
              <div>
                <h3 class="text-h3 mb-2">{skill.name}</h3>
                <p class="text-text-secondary">{skill.desc}</p>
              </div>
            </div>
          </Card>
        ))}
      </div>
    </SectionWrapper>
  </section>

  <!-- Why Section -->
  <SectionWrapper width="narrow">
    <h2 class="text-h2 text-center mb-4">Why I Made These Courses</h2>
    <p class="text-body-lg text-text-secondary text-center max-w-2xl mx-auto mb-10">
      When I started marketing my own business, I wasted so much money on agencies that overpromised and tutorials that taught theory instead of execution. I built the courses I wish existed back then.
    </p>
    <div class="max-w-lg mx-auto space-y-4 mb-10">
      <div class="flex items-start gap-3">
        <svg class="h-6 w-6 text-accent shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>
        <span class="text-body-lg text-text-secondary">Every lesson is from my real campaigns with real budgets — not a textbook</span>
      </div>
      <div class="flex items-start gap-3">
        <svg class="h-6 w-6 text-accent shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>
        <span class="text-body-lg text-text-secondary">On-demand and beginner-friendly — go at your own speed</span>
      </div>
      <div class="flex items-start gap-3">
        <svg class="h-6 w-6 text-accent shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>
        <span class="text-body-lg text-text-secondary">You get the same templates, checklists, and swipe files I actually use</span>
      </div>
    </div>
    <div class="text-center">
      <Button variant="primary" size="md" href="/courses/">
        See the Courses
      </Button>
    </div>
  </SectionWrapper>

  <!-- FAQ Section -->
  <SectionWrapper width="narrow">
    <h2 class="text-h2 text-center mb-10">Questions People Ask Me</h2>
    <div>
      <AccordionItem question="Who are your courses for?">
        <p>Anyone who runs a business and wants to learn how to market it themselves. You do not need experience — I start from scratch and build up. Whether you have never run an ad or you are already doing some marketing, you will get something out of it.</p>
      </AccordionItem>
      <AccordionItem question="Do I need to know marketing already?">
        <p>Nope. I explain everything in plain language. If you can send an email, you can follow my courses. I walk through every step with real examples, not jargon.</p>
      </AccordionItem>
      <AccordionItem question="What is different about your courses vs free YouTube content?">
        <p>Free content gives you pieces. My courses give you the whole picture — start to finish, in order, with the exact steps I take when I run campaigns. Plus you get my templates and tools so you can start right away instead of figuring it out yourself.</p>
      </AccordionItem>
      <AccordionItem question="How long do they take?">
        <p>Most courses are about 4-6 hours. They are broken into short lessons so you can do one a day or knock it out in a weekend — whatever works for you.</p>
      </AccordionItem>
      <AccordionItem question="Do I get templates and tools?">
        <p>Yes, every course comes with the templates, checklists, and swipe files I use in my own work. Just plug in your business details and go.</p>
      </AccordionItem>
      <AccordionItem question="When do courses launch?">
        <p>Soon. Drop your email below and I will let you know the moment they are live. You will also get early pricing that will not be available after launch.</p>
      </AccordionItem>
    </div>
  </SectionWrapper>

  <!-- Email Signup Section -->
  <section class="bg-navy-800">
    <SectionWrapper width="narrow" id="signup" class="text-center">
      <h2 class="text-h2 mb-4">Get on My List</h2>
      <p class="text-body-lg text-text-secondary mb-8 max-w-xl mx-auto">
        Every week I send out what is working in my marketing — strategies, breakdowns, and things I am testing. It is free and you can unsubscribe whenever.
      </p>
      <form id="email-signup" class="flex flex-col sm:flex-row gap-3 max-w-md mx-auto">
        <FormInput
          type="email"
          name="email"
          placeholder="Enter your email"
          required={true}
          class="flex-1"
        />
        <Button variant="primary" size="md">Count Me In</Button>
      </form>
      <p id="form-message" class="text-sm mt-3 hidden"></p>
      <p class="text-xs text-text-tertiary mt-4">
        No spam. Unsubscribe anytime.
      </p>
    </SectionWrapper>
  </section>

  <script>
    function setupEmailForm() {
      const form = document.getElementById('email-signup') as HTMLFormElement;
      const message = document.getElementById('form-message') as HTMLElement;

      form?.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = new FormData(form).get('email') as string;

        if (!email || !email.includes('@')) {
          message.textContent = 'Please enter a valid email address.';
          message.className = 'text-sm mt-3 text-error';
          message.classList.remove('hidden');
          return;
        }

        // Phase 4 will replace this with Kit API call
        message.textContent = "You're in! I'll be in touch.";
        message.className = 'text-sm mt-3 text-success';
        message.classList.remove('hidden');
        form.reset();
      });
    }

    setupEmailForm();
    document.addEventListener('astro:after-swap', setupEmailForm);
  </script>

</Base>
