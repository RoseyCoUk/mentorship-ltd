---
import Base from "../layouts/Base.astro";
import SectionWrapper from "../components/SectionWrapper.astro";
import Button from "../components/Button.astro";
import Card from "../components/Card.astro";
import AccordionItem from "../components/AccordionItem.astro";
import FormInput from "../components/FormInput.astro";

const metrics = [
  { value: "$XXM+", label: "Revenue Scaled" },
  { value: "XX+", label: "Businesses Mentored" },
  { value: "XX+", label: "Years Experience" },
  { value: "XX%", label: "Client Retention" },
];

const services = [
  { name: "Growth Strategy", icon: "analytics", desc: "Map out a clear, numbers-driven plan to scale your business past its current ceiling." },
  { name: "Sales Systems", icon: "funnel", desc: "Build repeatable sales processes that close deals without you being in every conversation." },
  { name: "Marketing That Works", icon: "paid-ads", desc: "Get your marketing generating leads consistently — paid, organic, or both." },
  { name: "Operations & Scale", icon: "automation", desc: "Fix the bottlenecks in your operations so growth does not break everything." },
  { name: "Offer Development", icon: "pricing", desc: "Refine your offer so it sells easier, retains longer, and commands higher prices." },
  { name: "Team & Leadership", icon: "team-training", desc: "Build and lead a team that runs without you micromanaging every decision." },
];
---

<Base title="Home" description="Alan Chan helps business owners scale — mentorship, strategy, and hands-on guidance to grow past your current ceiling.">

  <!-- Hero Section -->
  <SectionWrapper width="wide" class="pt-16 sm:pt-24 pb-12 sm:pb-16">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
      <div>
        <p class="text-accent font-bold text-sm uppercase tracking-wide mb-4">Alan Chan</p>
        <h1 class="text-hero font-bold text-white mb-6">
          I Help Business Owners Scale Past Their Current Ceiling
        </h1>
        <p class="text-body-lg text-text-secondary max-w-xl mb-8">
          Most business owners hit a wall where what got them here will not get them there. I work with you directly — strategy, systems, and execution — so you break through it.
        </p>
        <Button variant="primary" size="lg" href="/contact/">
          Book a Free Call
        </Button>
      </div>
      <div class="flex justify-center md:justify-end">
        <img
          src="/images/heroes/flowryse-1.webp"
          alt="Business growth strategy illustration"
          width="500"
          height="500"
          class="w-full max-w-md"
          loading="eager"
        />
      </div>
    </div>
  </SectionWrapper>

  <!-- Authority Metrics Bar -->
  <section class="bg-navy-950">
    <SectionWrapper width="wide">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
        {metrics.map((metric) => (
          <div>
            <p class="text-h2 text-accent font-bold">{metric.value}</p>
            <p class="text-text-secondary text-sm uppercase tracking-wide mt-1">{metric.label}</p>
          </div>
        ))}
      </div>
    </SectionWrapper>
  </section>

  <!-- What I Help With Section -->
  <SectionWrapper width="wide">
    <div class="text-center mb-12">
      <h2 class="text-h2 mb-4">What I Help With</h2>
      <p class="text-body-lg text-text-secondary max-w-2xl mx-auto">
        I work hands-on with business owners across six core areas — whatever is holding your business back right now.
      </p>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {services.map((service) => (
        <Card>
          <div class="flex items-start gap-4">
            <img
              src={`/images/icons/${service.icon}.webp`}
              alt=""
              width="48"
              height="48"
              class="w-12 h-12 shrink-0"
              loading="lazy"
            />
            <div>
              <h3 class="text-h3 mb-2">{service.name}</h3>
              <p class="text-text-secondary">{service.desc}</p>
            </div>
          </div>
        </Card>
      ))}
    </div>
  </SectionWrapper>

  <!-- Why Section -->
  <SectionWrapper width="narrow">
    <h2 class="text-h2 text-center mb-4">Why Business Owners Work With Me</h2>
    <p class="text-body-lg text-text-secondary text-center max-w-2xl mx-auto mb-10">
      I am not an advisor who gives you a PDF and disappears. I work alongside you, inside your business, until the problem is solved.
    </p>
    <div class="max-w-lg mx-auto space-y-4 mb-10">
      <div class="flex items-start gap-3">
        <svg class="h-6 w-6 text-accent shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>
        <span class="text-body-lg text-text-secondary">Hands-on, not theoretical — I get in the trenches with you and your team</span>
      </div>
      <div class="flex items-start gap-3">
        <svg class="h-6 w-6 text-accent shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>
        <span class="text-body-lg text-text-secondary">Custom to your business — no cookie-cutter playbooks or generic frameworks</span>
      </div>
      <div class="flex items-start gap-3">
        <svg class="h-6 w-6 text-accent shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>
        <span class="text-body-lg text-text-secondary">The goal is your independence — I build systems so you do not need me forever</span>
      </div>
    </div>
    <div class="text-center">
      <Button variant="primary" size="md" href="/contact/">
        Book a Free Call
      </Button>
    </div>
  </SectionWrapper>

  <!-- FAQ Section -->
  <SectionWrapper width="narrow">
    <h2 class="text-h2 text-center mb-10">Questions People Ask Me</h2>
    <div>
      <AccordionItem question="Who do you work with?">
        <p>I work with business owners who are already making money but have hit a ceiling. You have revenue, you have customers, but something is keeping you stuck — whether that is operations, sales, marketing, or team. If you are past the startup phase and ready to scale, we are probably a good fit.</p>
      </AccordionItem>
      <AccordionItem question="What does the mentorship actually look like?">
        <p>It starts with a deep dive into your business — where you are, where you want to go, and what is in the way. From there I build a custom plan and we work through it together. That means regular calls, async support, and me getting into the details of your business alongside you. It is not a course or a group program — it is direct, one-on-one work.</p>
      </AccordionItem>
      <AccordionItem question="How is this different from hiring a consultant?">
        <p>Most consultants hand you a strategy deck and leave. I stay in it with you through execution. I am not here to tell you what to do and disappear — I am here to help you build the systems, make the decisions, and get the results. Think of it as having a partner who has done this before.</p>
      </AccordionItem>
      <AccordionItem question="What kind of results do your clients get?">
        <p>It depends on where you start, but most clients see meaningful progress within the first few months — whether that is increased revenue, better margins, a team that actually runs without them, or all of the above. I will be honest with you upfront about what is realistic for your situation.</p>
      </AccordionItem>
      <AccordionItem question="How much does it cost?">
        <p>It depends on the scope of what we are working on together. I will give you a straight answer on the first call — no hidden fees, no upsells. If it is not the right fit or the right time, I will tell you that too.</p>
      </AccordionItem>
      <AccordionItem question="How do I get started?">
        <p>Book a free call below. We will talk about your business, what you are trying to achieve, and whether I can help. No pressure, no pitch — just a conversation to see if we are a good fit.</p>
      </AccordionItem>
    </div>
  </SectionWrapper>

  <!-- Email Signup Section -->
  <section class="bg-navy-800">
    <SectionWrapper width="narrow" id="signup" class="text-center">
      <h2 class="text-h2 mb-4">Get on My List</h2>
      <p class="text-body-lg text-text-secondary mb-8 max-w-xl mx-auto">
        Every week I share what is working for the businesses I mentor — growth strategies, scaling lessons, and things most owners figure out too late. It is free and you can unsubscribe whenever.
      </p>
      <form id="email-signup" class="flex flex-col sm:flex-row gap-3 max-w-md mx-auto">
        <FormInput
          type="email"
          name="email"
          placeholder="Enter your email"
          required={true}
          class="flex-1"
        />
        <Button variant="primary" size="md">Count Me In</Button>
      </form>
      <p id="form-message" class="text-sm mt-3 hidden"></p>
      <p class="text-xs text-text-tertiary mt-4">
        No spam. Unsubscribe anytime.
      </p>
    </SectionWrapper>
  </section>

  <script>
    function setupEmailForm() {
      const form = document.getElementById('email-signup') as HTMLFormElement;
      const message = document.getElementById('form-message') as HTMLElement;

      form?.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = new FormData(form).get('email') as string;

        if (!email || !email.includes('@')) {
          message.textContent = 'Please enter a valid email address.';
          message.className = 'text-sm mt-3 text-error';
          message.classList.remove('hidden');
          return;
        }

        // Phase 4 will replace this with Kit API call
        message.textContent = "You're in! I'll be in touch.";
        message.className = 'text-sm mt-3 text-success';
        message.classList.remove('hidden');
        form.reset();
      });
    }

    setupEmailForm();
    document.addEventListener('astro:after-swap', setupEmailForm);
  </script>

</Base>
